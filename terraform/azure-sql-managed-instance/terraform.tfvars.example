# ============================================================================
# EXAMPLE: SQL Managed Instance Configuration
# Copy this file to terraform.tfvars and customize
# ============================================================================

# General Configuration
resource_group_name = "rg-sqlmi-example"
location            = "eastus"

# Network Configuration (REQUIRED)
vnet_address_space     = "10.0.0.0/16"
subnet_address_prefix  = "10.0.1.0/24"  # Minimum /28, recommended /24

# Managed Instance Configuration
managed_instance_name = "sqlmi-example-001"  # Must be unique
administrator_login   = "sqladmin"
# administrator_login_password = "YourSecureP@ssw0rd123!"  # Leave commented to auto-generate

# Performance Configuration
sku_name             = "GP_Gen5"       # General Purpose, Generation 5
vcores               = 8               # 8 vCores
storage_size_in_gb   = 256             # 256 GB storage
license_type         = "LicenseIncluded"  # Or "BasePrice" for Azure Hybrid Benefit (55% savings)

# Database Settings
collation   = "SQL_Latin1_General_CP1_CI_AS"
timezone_id = "UTC"  # Or "Eastern Standard Time", etc.

# Security Settings
minimum_tls_version          = "1.2"
public_data_endpoint_enabled = false  # Keep false for production
proxy_override               = "Proxy"  # Or "Redirect" for better performance

# High Availability
zone_redundant_enabled = false  # Set true for production
storage_account_type   = "GRS"  # Or "LRS", "ZRS"

# Azure AD Authentication (Optional)
enable_azure_ad_auth = false
# azure_ad_admin_login     = "admin@yourdomain.com"
# azure_ad_admin_object_id = "12345678-1234-1234-1234-123456789012"

# Advanced Threat Protection
enable_threat_detection           = true
threat_detection_retention_days   = 90
threat_detection_email_admins     = true
threat_detection_email_addresses  = ["admin@yourdomain.com"]

# Auditing
enable_auditing = true

# Vulnerability Assessment (Optional)
enable_vulnerability_assessment = false  # Requires threat detection

# Tags
tags = {
  Environment = "Production"
  Project     = "VM-Migration"
  ManagedBy   = "Terraform"
  Owner       = "Platform Team"
}

# ============================================================================
# IMPORTANT NOTES:
# ============================================================================
# 
# 1. DEPLOYMENT TIME: First deployment takes 4-6 hours
# 2. NETWORK: Subnet must be delegated to Microsoft.Sql/managedInstances
# 3. SUBNET SIZE: Minimum /28 (16 IPs), recommended /24 (256 IPs)
# 4. COST: Starting at ~$670/month (GP_Gen5_4) with Azure Hybrid Benefit
# 5. HYBRID BENEFIT: Use license_type = "BasePrice" to save 55%
# 6. UPDATES: Configuration changes can take 1-2 hours
# 7. CONNECTIVITY: Access restricted to VNet by default
#
# ============================================================================
