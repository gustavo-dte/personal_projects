# TODO: Update to actual values when we have them

## Manifest for migration replication (example)

# Global defaults (can be overridden per-VM in vms list)
azure_migrate_project_name: my-migrate-proj
azure_migrate_project_resource_group: rg-migrate
target_subscription_id: 00000000-0000-0000-0000-000000000000
target_resource_group: rg-target

# Azure Backup defaults
recovery_vault_name: my-recovery-vault
backup_policy_name: DefaultPolicy
replication_threshold: 80

# Network configuration (required)
# Full Azure resource ID of the target virtual network
target_network_id: /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg-target/providers/Microsoft.Network/virtualNetworks/vnet-target
target_subnet_name: subnet-apps
target_vm_size: Standard_D4s_v5
target_license_type: NoLicenseType
target_disk_type: Standard_LRS

# List of VMs to replicate
vms:
  - name: test-1
    target_vm_size: Standard_D2s_v5
    target_license_type: NoLicenseType
    portfolio: Team1
    tier: 4

  - name: app01
    target_vm_name: app01-repl
    # os_disk_scsi_id: scsi0:0   # optional override (default: scsi0:0)
    portfolio: Team2
    tier: 2
    additional_resources:
      api_management:
        - name: demo-apim
          resource_group: rg-target
          location: eastus
          publisher_name: Example Co
          publisher_email: admin@example.com
          sku: Developer
      managed_identities:
        - name: mi-app
          resource_group: rg-target
          location: eastus
          roles:
            - role_definition_name: Contributor
              scope: /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg-target
            - role_definition_name: Reader
              scope: /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg-target/providers/Microsoft.Storage/storageAccounts/mystorageacct01
      private_endpoints:
        - name: pe-sbus-namespace
          resource_group: rg-target
          location: eastus
          subnet_id: /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg-target/providers/Microsoft.Network/virtualNetworks/vnet-target/subnets/subnet-apps
          target_resource_id: /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/rg-messaging/providers/Microsoft.ServiceBus/namespaces/sbus-namespace
          group_ids:
            - namespace
          tags:
            env: dev
      storage_accounts:
        - name: app01storage
          resource_group: rg-target
          location: eastus
          account_tier: Standard
          replication_type: LRS
          tags:
            env: dev

  - name: app02
    target_vm_size: Standard_D2s_v5
    target_license_type: Windows_Server
    portfolio: Team2
    tier: 2
    # VM-specific network override (using full resource ID)
    target_network_id: /subscriptions/11111111-1111-1111-1111-111111111111/resourceGroups/rg-network/providers/Microsoft.Network/virtualNetworks/vnet-prod
    target_subnet_name: subnet-dmz
    backup:
      recovery_vault_name: my-special-vault
      backup_policy_name: CustomPolicy
      replication_threshold: 90
    additional_resources:
      storage_accounts:
        - name: app02storage
          resource_group: rg-target
          location: eastus2
          account_tier: Standard
          replication_type: ZRS

  - name: db01
    target_resource_group: rg-target-db
    target_virtual_network_name: vnet-target-db
    target_subnet_name: subnet-db
    target_disk_type: Premium_LRS
    portfolio: Team2
    tier: 2

# Additional resources for future TF generation
global_additional_resources:
  storage_accounts:
    - name: mystorageacct01
      resource_group: rg-target
      location: eastus
      account_tier: Standard
      replication_type: GRS
      tags:
        env: dev
        owner: demo
